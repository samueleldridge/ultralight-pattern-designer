# ═════════════════════════════════════════════════════════════════════════════
# AI ANALYTICS PLATFORM - ENVIRONMENT CONFIGURATION
# ═════════════════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in your actual API keys
# NEVER commit .env to version control - it contains secrets!
# ═════════════════════════════════════════════════════════════════════════════

# =============================================================================
# SECTION 1: CORE AI MODEL (REQUIRED)
# Moonshot AI - Kimi K2.5 Model Configuration
# Get your API key: https://platform.moonshot.cn
# =============================================================================

# Moonshot API Key (starts with sk-proj-)
MOONSHOT_API_KEY=sk-kimi-Bw3WM1tyxTuoRRfha5E8eDqDJMs4QzoBkzQx3LE4PsCeci2Vo5N6QE2a4roDSMIe

# Base URL for Moonshot API
MOONSHOT_BASE_URL=https://api.moonshot.cn/v1

# Model selection - Kimi K2.5 recommended for best results
MOONSHOT_MODEL=kimi-k2-5

# Maximum tokens per request (Kimi K2.5 supports up to 16384)
MOONSHOT_MAX_TOKENS=16384

# Temperature: 0.0 = deterministic, 1.0 = creative
# For analytics, we recommend 0.1 for consistent SQL generation
MOONSHOT_TEMPERATURE=0.1

# Request timeout in seconds
MOONSHOT_TIMEOUT=120

# =============================================================================
# SECTION 2: DATABASE & BACKEND (REQUIRED)
# Supabase Configuration
# Create project: https://supabase.com
# =============================================================================

# Supabase Project URL (e.g., https://xxxxx.supabase.co)
SUPABASE_URL=https://mupzwarvwrlksptoamsq.supabase.co

# Supabase Service Role Key (for backend operations)
# ⚠️ Keep this secret! Never expose in frontend code.
SUPABASE_SERVICE_KEY=sb_publishable_ytmoae6FcuPBjkMqdsDchQ_FztCYpWL

# Supabase Anon/Public Key (for client-side operations)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11cHp3YXJ2d3Jsa3NwdG9hbXNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk5NDU0ODgsImV4cCI6MjA4NTUyMTQ4OH0.owdfLYpbIagwgOEm7jAr6epUrVcqwya7cWCF6RSCfGM

# Database Connection String (from Supabase Dashboard > Database > Connection Pooling)
# Use the connection pooler (port 6543) for serverless environments
DATABASE_URL=postgresql://postgres.mupzwarvwrlksptoamsq@aws-0-us-east-1.pooler.supabase.com:6543/postgres?sslmode=require

# Direct database connection (for migrations, not for app use)
DIRECT_DATABASE_URL=postgresql://postgres.mupzwarvwrlksptoamsq@aws-0-us-east-1.pooler.supabase.com:6543/postgres?sslmode=require

# =============================================================================
# SECTION 3: AUTHENTICATION (REQUIRED)
# Clerk Authentication
# Create app: https://dashboard.clerk.com
# =============================================================================

# Clerk Secret Key (backend)
CLERK_SECRET_KEY=

# Clerk Publishable Key (frontend)
CLERK_PUBLISHABLE_KEY=

# Frontend-exposed Clerk key (must match CLERK_PUBLISHABLE_KEY)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=

# Clerk webhook secret (for verifying webhooks)
CLERK_WEBHOOK_SECRET=whsec_your-webhook-secret

# =============================================================================
# SECTION 4: FALLBACK AI PROVIDER (OPTIONAL)
# OpenAI Configuration - Used as fallback if Moonshot is unavailable
# Get your API key: https://platform.openai.com
# =============================================================================

# OpenAI API Key (optional, for fallback)
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI Model for text generation
OPENAI_MODEL=gpt-4-0125-preview

# OpenAI Model for embeddings
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# =============================================================================
# SECTION 5: OBSERVABILITY & MONITORING (OPTIONAL)
# Track AI performance, costs, and errors
# =============================================================================

# Langfuse - LLM observability (https://langfuse.com)
LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key
LANGFUSE_SECRET_KEY=3d65c4fd2256c22a6272dfddf3a96af31c9a221387128f62ab4dec2ef9ca9a93
LANGFUSE_HOST=https://cloud.langfuse.com

# PostHog - Product analytics (https://posthog.com)
POSTHOG_API_KEY=phc_your-posthog-key
POSTHOG_HOST=https://app.posthog.com

# Sentry - Error tracking (https://sentry.io)
SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
SENTRY_ENVIRONMENT=production

# =============================================================================
# SECTION 6: INFRASTRUCTURE & REDIS
# =============================================================================

# Redis connection URL
REDIS_URL=redis://localhost:6379

# Redis password (if using external Redis with auth)
REDIS_PASSWORD=

# =============================================================================
# SECTION 7: APPLICATION SETTINGS
# =============================================================================

# Application name
APP_NAME="AI Analytics Platform"

# Environment: development, staging, production
ENVIRONMENT=development

# Debug mode (set to false in production)
DEBUG=false

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Secret key for session signing, encryption, etc.
# This is auto-generated by setup.sh - do not change manually!
SECRET_KEY=3d65c4fd2256c22a6272dfddf3a96af31c9a221387128f62ab4dec2ef9ca9a93

# JWT secret for token signing
JWT_SECRET_KEY=8b4dc38afad5f026848c3f66ab026aca4c909fe083b35e08b1908d4c67101b3b

# Encryption key for sensitive data at rest
ENCRYPTION_KEY=2360019313947a6f218caa00e46f0dc9

# =============================================================================
# SECTION 8: SECURITY SETTINGS
# =============================================================================

# Allowed CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# Rate limiting: requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# Maximum upload size in MB
MAX_UPLOAD_SIZE=10

# Session timeout in minutes
SESSION_TIMEOUT=60

# Enable secure headers (set to true in production)
SECURE_HEADERS=true

# =============================================================================
# SECTION 9: FEATURE FLAGS
# =============================================================================

# Enable proactive insights feature
ENABLE_PROACTIVE_INSIGHTS=true

# Enable RAG (Retrieval Augmented Generation) for document queries
ENABLE_RAG=true

# Enable collaborative features
ENABLE_COLLABORATION=true

# Enable caching for query results
ENABLE_QUERY_CACHE=true

# Cache TTL in seconds (default: 1 hour)
CACHE_TTL=3600

# =============================================================================
# SECTION 10: ADVANCED SETTINGS (OPTIONAL)
# =============================================================================

# Number of worker processes
WORKERS=4

# Request timeout in seconds
REQUEST_TIMEOUT=300

# Connection pool size
DB_POOL_SIZE=10

# Webhook retry attempts
WEBHOOK_RETRY_ATTEMPTS=3

# =============================================================================
# DOCKER-SPECIFIC SETTINGS
# =============================================================================

# PostgreSQL settings (for local Docker deployment)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=aianalytics

# Port mappings (change if ports are in use)
FRONTEND_PORT=3000
BACKEND_PORT=8000
POSTGRES_PORT=5432
REDIS_PORT=6379
